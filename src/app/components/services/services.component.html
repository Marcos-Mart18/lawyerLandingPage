<section id="servicios" class="py-24 bg-navy-900 text-white relative overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%23ffffff&quot; fill-opacity=&quot;1&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold mb-4">
        Nuestros Servicios
      </h2>
      <p class="text-xl text-slate-300 max-w-2xl mx-auto">
        Soluciones legales integrales para empresas
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Servicio 1 -->
      <div class="glass-dark rounded-2xl p-8 hover:scale-105 transition-all duration-300 cursor-pointer group"
        (click)="openServiceModal(services[0])">
        <div class="flex items-start mb-6">
          <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-ice-500 to-ice-700 flex items-center justify-center text-3xl mr-4 group-hover:rotate-12 transition-transform duration-300">
            <svg class="w-12 h-12 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M392 176L248 176L210.7 101.5C208.9 97.9 208 93.9 208 89.9C208 75.6 219.6 64 233.9 64L406.1 64C420.4 64 432 75.6 432 89.9C432 93.9 431.1 97.9 429.3 101.5L392 176zM233.6 224L406.4 224L455.1 264.6C521.6 320 560 402 560 488.5C560 536.8 520.8 576 472.5 576L167.4 576C119.2 576 80 536.8 80 488.5C80 402 118.4 320 184.9 264.6L233.6 224zM324 288C313 288 304 297 304 308L304 312C275.2 312.3 252 335.7 252 364.5C252 390.2 270.5 412.1 295.9 416.3L337.6 423.3C343.6 424.3 348 429.5 348 435.6C348 442.5 342.4 448.1 335.5 448.1L280 448C269 448 260 457 260 468C260 479 269 488 280 488L304 488L304 492C304 503 313 512 324 512C335 512 344 503 344 492L344 487.3C369 483.2 388 461.6 388 435.5C388 409.8 369.5 387.9 344.1 383.7L302.4 376.7C296.4 375.7 292 370.5 292 364.4C292 357.5 297.6 351.9 304.5 351.9L352 351.9C363 351.9 372 342.9 372 331.9C372 320.9 363 311.9 352 311.9L344 311.9L344 307.9C344 296.9 335 287.9 324 287.9z"/></svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold mb-2">{{ services[0].title }}</h3>
            <p class="text-slate-300">{{ services[0].subtitle }}</p>
          </div>
        </div>
        <p class="text-slate-400 mb-6">{{ services[0].shortDescription }}</p>
        <button class="text-ice-400 hover:text-ice-300 font-medium flex items-center group-hover:gap-3 gap-2 transition-all">
          Conocer el servicio
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </button>
      </div>

      <!-- Servicio 2 -->
      <div class="glass-dark rounded-2xl p-8 hover:scale-105 transition-all duration-300 cursor-pointer group"
        (click)="openServiceModal(services[1])">
        <div class="flex items-start mb-6">
          <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-navy-500 to-navy-700 flex items-center justify-center text-3xl mr-4 group-hover:rotate-12 transition-transform duration-300">
            <svg class="w-12 h-12 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M232 144C218.7 144 208 154.7 208 168L208 472C208 480.4 206.6 488.5 203.9 496L504 496C517.3 496 528 485.3 528 472L528 168C528 154.7 517.3 144 504 144L232 144zM136 544C96.2 544 64 511.8 64 472L64 176C64 162.7 74.7 152 88 152C101.3 152 112 162.7 112 176L112 472C112 485.3 122.7 496 136 496C149.3 496 160 485.3 160 472L160 168C160 128.2 192.2 96 232 96L504 96C543.8 96 576 128.2 576 168L576 472C576 511.8 543.8 544 504 544L136 544zM256 216C256 202.7 266.7 192 280 192L328 192C341.3 192 352 202.7 352 216L352 264C352 277.3 341.3 288 328 288L280 288C266.7 288 256 277.3 256 264L256 216zM408 240L456 240C469.3 240 480 250.7 480 264C480 277.3 469.3 288 456 288L408 288C394.7 288 384 277.3 384 264C384 250.7 394.7 240 408 240zM280 320L456 320C469.3 320 480 330.7 480 344C480 357.3 469.3 368 456 368L280 368C266.7 368 256 357.3 256 344C256 330.7 266.7 320 280 320zM280 400L456 400C469.3 400 480 410.7 480 424C480 437.3 469.3 448 456 448L280 448C266.7 448 256 437.3 256 424C256 410.7 266.7 400 280 400z"/></svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold mb-2">{{ services[1].title }}</h3>
            <p class="text-slate-300">{{ services[1].subtitle }}</p>
          </div>
        </div>
        <p class="text-slate-400 mb-6">{{ services[1].shortDescription }}</p>
        <button class="text-ice-400 hover:text-ice-300 font-medium flex items-center group-hover:gap-3 gap-2 transition-all">
          Conocer el servicio
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Full Screen Side Panel -->
  <div *ngIf="selectedService" 
    class="fixed inset-0 z-50 bg-black/60 backdrop-blur-sm animate-fade-in"
    (click)="closeServiceModal()">
    
    <!-- Panel Content -->
    <div class="absolute right-0 top-0 bottom-0 w-full bg-white shadow-2xl overflow-y-auto animate-slide-in-right"
      (click)="$event.stopPropagation()">
      
      <!-- Close Button -->
      <button (click)="closeServiceModal()" 
        class="fixed top-6 right-6 z-50 w-12 h-12 rounded-full bg-navy-900 hover:bg-navy-800 text-white flex items-center justify-center transition-all shadow-lg hover:scale-110">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>

      <!-- Hero Section with Slides -->
      <div class="relative h-96 bg-navy-900 overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-navy-900/90 to-navy-800/70 z-10"></div>
        
        <!-- Background Image -->
        <div *ngFor="let slide of selectedService.heroSlides; let i = index"
          class="absolute inset-0 bg-cover bg-center transition-opacity duration-1000"
          [style.background-image]="'url(' + slide.image + ')'"
          [ngClass]="currentHeroSlide === i ? 'opacity-100' : 'opacity-0'">
        </div>

        <!-- Hero Content -->
        <div class="relative z-20 h-full flex items-center">
          <div class="max-w-7xl mx-auto px-8 w-full">
            <div class="max-w-3xl">
              <h1 class="text-5xl font-bold text-white mb-4">
                {{ selectedService.heroSlides[currentHeroSlide].title }}
              </h1>
              <p class="text-2xl text-ice-300">
                {{ selectedService.heroSlides[currentHeroSlide].subtitle }}
              </p>
            </div>
          </div>
        </div>

        <!-- Hero Slide Buttons -->
        <div *ngIf="selectedService.heroSlides.length > 1" class="absolute bottom-8 right-8 z-20 space-y-3">
          <button *ngFor="let slide of selectedService.heroSlides; let i = index"
            (click)="changeHeroSlide(i)"
            class="block w-full text-left px-6 py-3 rounded-lg transition-all duration-300"
            [ngClass]="currentHeroSlide === i ? 'bg-ice-600 text-white shadow-lg' : 'bg-white/20 text-white hover:bg-white/30'">
            <div class="text-xs uppercase tracking-wide opacity-80">{{ slide.title }}</div>
          </button>
        </div>
      </div>

      <!-- Content Sections -->
      <div class="max-w-7xl mx-auto px-8 py-16">
        
        <!-- Service Details -->
        <div *ngFor="let detail of selectedService.details" id="service-detail-{{detail.number}}" class="mb-20">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- Text Content -->
            <div [ngClass]="detail.number === '2' ? 'lg:order-2' : ''">
              <div class="relative">
                <span class="absolute -left-4 -top-8 text-[200px] font-bold text-ice-100 opacity-30 select-none">
                  {{ detail.number }}
                </span>
                <h2 class="relative text-4xl font-bold text-ice-600 mb-6">
                  {{ detail.title }}
                </h2>
              </div>
              <p class="text-lg text-slate-700 mb-8 leading-relaxed">
                {{ detail.description }}
              </p>
              
              <h3 class="text-xl font-semibold text-navy-900 mb-4">
                Actividades de {{ detail.title.toLowerCase() }}:
              </h3>
              <ul class="space-y-3">
                <li *ngFor="let activity of detail.activities" class="flex items-start">
                  <svg class="w-6 h-6 text-ice-600 mr-3 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <span class="text-slate-700">{{ activity }}</span>
                </li>
              </ul>
            </div>

            <!-- Image -->
            <div [ngClass]="detail.number === '2' ? 'lg:order-1' : ''">
              <div>
                <img [src]="detail.image" [alt]="detail.title">
              </div>
            </div>
          </div>
        </div>

        <!-- FAQs Section -->
        <div *ngIf="selectedService.faqs.length > 0" id="service-faqs" class="mt-20">
          <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-navy-900 mb-4">Preguntas Frecuentes</h2>
            <p class="text-xl text-slate-600">Respuestas a las preguntas más comunes</p>
          </div>

          <div class="max-w-4xl mx-auto space-y-4">
            <div *ngFor="let faq of selectedService.faqs" 
              class="border border-slate-200 rounded-xl overflow-hidden transition-all duration-300"
              [ngClass]="faq.expanded ? 'shadow-lg' : 'shadow-md hover:shadow-lg'">
              
              <button (click)="toggleFAQ(faq)" 
                class="w-full px-6 py-5 flex items-center justify-between text-left hover:bg-slate-50 transition-colors">
                <span class="text-lg font-semibold text-navy-900 pr-4">{{ faq.question }}</span>
                <svg class="w-6 h-6 text-ice-600 flex-shrink-0 transition-transform duration-300"
                  [ngClass]="faq.expanded ? 'rotate-180' : ''"
                  fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
              </button>

              <div class="overflow-hidden transition-all duration-300"
                [ngClass]="faq.expanded ? 'max-h-96' : 'max-h-0'">
                <div class="px-6 pb-5 text-slate-700 leading-relaxed">
                  {{ faq.answer }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- CTA Section -->
        <div class="mt-20 bg-gradient-to-r from-ice-600 to-navy-700 rounded-3xl p-12 text-center text-white">
          <h3 class="text-3xl font-bold mb-4">¿Interesado en este servicio?</h3>
          <p class="text-xl mb-8 opacity-90">Agenda una consulta gratuita con nuestros expertos</p>
          <button (click)="goToContact()" 
            class="px-10 py-4 bg-white text-navy-900 rounded-full hover:bg-slate-100 transition-all duration-200 shadow-xl hover:shadow-2xl hover:scale-105 font-bold text-lg">
            Agendar Consulta Ahora
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
